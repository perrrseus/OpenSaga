<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenSaga - 开源协作网络可视化</title>
    <!-- 添加Chart.js库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <!-- 添加vis.js库用于网络可视化 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" type="text/css" />
    <!-- 添加D3.js库用于桑基图可视化 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://unpkg.com/d3-sankey@0.12.3/dist/d3-sankey.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        h1 {
            font-size: 2rem;
            margin: 0;
        }
        
        .subtitle {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        /* Navigation Styles */
        nav {
            background: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .nav-list {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        .nav-item {
            margin-right: 1rem;
        }
        
        .nav-link {
            display: block;
            padding: 1rem 1.5rem;
            text-decoration: none;
            color: #666;
            font-weight: 500;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .nav-link:hover, .nav-link.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background-color: #f8f9ff;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        /* Page Content Styles */
        .page-content {
            display: none;
        }
        
        .page-content.active {
            display: block;
        }
        
        /* Section Styles */
        .section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 2rem;
            padding: 2rem;
        }
        
        h2 {
            color: #667eea;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 0.5rem;
        }
        
        /* Home Page Styles */
        .home-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .home-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 8px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        
        .home-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .home-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .home-card p {
            opacity: 0.9;
            margin-bottom: 1.5rem;
        }
        
        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .btn:hover {
            background: white;
            color: #667eea;
        }
        
        /* Graph Container Styles */
        .graph-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .graph-item {
            background: #fafafa;
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #e0e0e0;
        }
        
        .graph-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .graph-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #333;
        }
        
        .graph-description {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 1rem;
            min-height: 50px;
        }
        
        .graph-item img {
            max-width: 100%;
            height: auto;
            border-radius: 6px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }
        
        /* Analysis Link Styles */
        .analysis-link {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background-color: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }
        
        .analysis-link:hover {
            background-color: #5a6fd8;
            transform: translateY(-2px);
        }
        
        /* Expandable Analysis Module Styles */
        .analysis-section {
            margin-top: 1rem;
            border-top: 1px solid #f0f0f0;
            padding-top: 1rem;
        }
        
        .analysis-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding: 0.75rem;
            background-color: #f5f7fa;
            border-radius: 4px;
            transition: all 0.3s ease;
        }
        
        .analysis-header:hover {
            background-color: #e9ecef;
        }
        
        .analysis-title {
            font-weight: bold;
            color: #667eea;
        }
        
        .analysis-toggle {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }
        
        .analysis-toggle.expanded {
            transform: rotate(180deg);
        }
        
        .analysis-content {
            display: none;
            padding: 1rem;
            background-color: #fafafa;
            border-radius: 0 0 4px 4px;
            border: 1px solid #f0f0f0;
            border-top: none;
            margin-top: -4px;
            line-height: 1.6;
        }
        
        .analysis-content.expanded {
            display: block;
        }
        
        /* Footer Styles */
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 1.5rem 0;
            margin-top: 2rem;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
                gap: 1rem;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .nav-container {
                padding: 0;
            }
            
            .nav-list {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .nav-item {
                margin-right: 0;
            }
            
            .nav-link {
                padding: 0.75rem 1rem;
                font-size: 0.9rem;
            }
            
            .container,
            .section {
                padding: 1rem;
            }
            
            .graph-container {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .home-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div>
                <h1>OpenSaga</h1>
                <p class="subtitle">开源协作网络可视化平台</p>
            </div>
        </div>
    </header>
    
    <!-- Navigation Bar -->
    <nav>
        <div class="nav-container">
            <ul class="nav-list">
                <li class="nav-item"><a href="#" class="nav-link active" onclick="showPage('home'); return false;">首页</a></li>
                <li class="nav-item"><a href="#" class="nav-link" onclick="showPage('network'); return false;">网络结构可视化</a></li>
                <li class="nav-item"><a href="#" class="nav-link" onclick="showPage('evolution'); return false;">时间演化可视化</a></li>
                <li class="nav-item"><a href="#" class="nav-link" onclick="showPage('community'); return false;">社区分析可视化</a></li>
                <li class="nav-item"><a href="#" class="nav-link" onclick="showPage('developer'); return false;">开发者分析可视化</a></li>
                <li class="nav-item"><a href="#" class="nav-link" onclick="showPage('collaboration'); return false;">合作模式可视化</a></li>
            </ul>
        </div>
    </nav>
    
    <div class="container">
        <!-- Home Page -->
        <div id="home" class="page-content active">
            <div class="section">
                <h2>欢迎使用 OpenSaga</h2>
                <p>OpenSaga 是一个开源协作网络可视化平台，旨在帮助您理解和分析开源项目的协作网络结构、时间演化过程、社区结构特征、开发者行为和影响力以及合作模式。</p>
                
                <div class="home-grid">
                    <div class="home-card" onclick="showPage('network');">
                        <h3>网络结构可视化</h3>
                        <p>探索开源项目的协作网络结构、核心开发者影响力以及技术栈之间的合作关系。</p>
                        <a href="#" class="btn" onclick="showPage('network'); return false;">查看详情</a>
                    </div>
                    
                    <div class="home-card" onclick="showPage('evolution');">
                        <h3>时间演化可视化</h3>
                        <p>分析开源项目的时间演化过程，包括开发者增长、合作活跃度、社区结构变化和网络健康指标。</p>
                        <a href="#" class="btn" onclick="showPage('evolution'); return false;">查看详情</a>
                    </div>
                    
                    <div class="home-card" onclick="showPage('community');">
                        <h3>社区分析可视化</h3>
                        <p>分析开源项目的社区结构特征、规模分布、生命周期变化以及社区成员流动情况。</p>
                        <a href="#" class="btn" onclick="showPage('community'); return false;">查看详情</a>
                    </div>
                    
                    <div class="home-card" onclick="showPage('developer');">
                        <h3>开发者分析可视化</h3>
                        <p>深入分析开发者的影响力排名、核心开发者画像以及开发者成长轨迹。</p>
                        <a href="#" class="btn" onclick="showPage('developer'); return false;">查看详情</a>
                    </div>
                    
                    <div class="home-card" onclick="showPage('collaboration');">
                        <h3>合作模式可视化</h3>
                        <p>分析开源项目中的合作强度、技术融合程度以及合作关系的生命周期。</p>
                        <a href="#" class="btn" onclick="showPage('collaboration'); return false;">查看详情</a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Network Structure Visualization Page -->
        <div id="network" class="page-content">
            <div class="section">
                <h2>网络结构可视化</h2>
                <p>通过可视化图表展示开源项目的协作网络结构、核心开发者影响力以及技术栈之间的合作关系。</p>
                
                <div class="graph-container">
                    <!-- 开发者协作网络图 -->
                    <div class="graph-item">
                        <div class="graph-title">开发者协作网络图</div>
                        <div class="graph-description">节点大小表示PageRank，边粗细表示合作强度，颜色区分技术栈</div>
                        <div id="developerNetwork" style="width: 100%; height: 400px;"></div>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>从开发者协作网络图中可以看出：</p>
                                <ul>
                                    <li>开发者4是网络中的核心人物，与多个开发者有高强度合作关系</li>
                                    <li>开发者10和开发者5也是重要的连接节点</li>
                                    <li>网络呈现出明显的核心-外围结构，核心开发者连接了大部分外围开发者</li>
                                    <li>边的粗细反映了合作强度，颜色深浅表示权重大小</li>
                                    <li>点击任意开发者节点可以查看其详细的协作记录</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 核心开发者影响力图 -->
                    <div class="graph-item">
                        <div class="graph-title">核心开发者影响力图</div>
                        <div class="graph-description">突出核心开发者的连接作用，红色节点表示核心开发者</div>
                        <div id="coreDeveloperNetwork" style="width: 100%; height: 400px;"></div>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>核心开发者影响力图分析：</p>
                                <ul>
                                    <li>红色节点（开发者4、10、5）是项目的核心开发者</li>
                                    <li>核心开发者之间有紧密的合作关系，形成了稳定的核心团队</li>
                                    <li>核心开发者连接了大部分普通开发者，是项目的关键桥梁</li>
                                    <li>网络结构清晰，核心-外围层次分明</li>
                                    <li>核心开发者的影响力通过边的粗细直观体现</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 技术栈协作网络 -->
                    <div class="graph-item">
                        <div class="graph-title">技术栈协作网络</div>
                        <div class="graph-description">展示不同技术栈之间的合作关系，节点大小表示该技术栈的开发者数量</div>
                        <div id="techStackNetwork" style="width: 100%; height: 400px;"></div>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>技术栈协作网络分析：</p>
                                <ul>
                                    <li>JavaScript是最活跃的技术栈，开发者数量最多</li>
                                    <li>JavaScript与TypeScript有密切的合作关系</li>
                                    <li>Python是第二大技术栈，与多种技术栈有合作</li>
                                    <li>不同技术栈之间形成了复杂的协作网络</li>
                                    <li>技术栈之间的合作强度通过边的粗细表示</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Time Evolution Visualization Page -->
        <div id="evolution" class="page-content">
            <div class="section">
                <h2>时间演化可视化</h2>
                <p>通过可视化图表展示开源项目的时间演化过程，包括开发者增长、合作活跃度、社区结构变化和网络健康指标。</p>
                
                <div class="graph-container">
                    <!-- 月度活跃开发者趋势图 -->
                    <div class="graph-item">
                        <div class="graph-title">月度活跃开发者趋势</div>
                        <div class="graph-description">展示项目月度活跃开发者数量的变化趋势，反映项目吸引力</div>
                        <canvas id="activeDevelopersChart" width="400" height="300"></canvas>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>月度活跃开发者趋势分析：</p>
                                <ul>
                                    <li>项目月度活跃开发者数量保持在45-50人之间，相对稳定</li>
                                    <li>2月份和12月份活跃开发者数量有所增加，可能与项目重要里程碑有关</li>
                                    <li>整体趋势较为平稳，项目具有持续的吸引力</li>
                                    <li>开发者数量的稳定性反映了项目的健康发展</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 合作次数与强度趋势图 -->
                    <div class="graph-item">
                        <div class="graph-title">合作次数与强度趋势</div>
                        <div class="graph-description">展示月度合作次数和平均合作强度的变化，体现项目活力</div>
                        <canvas id="collaborationChart" width="400" height="300"></canvas>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>合作次数与强度趋势分析：</p>
                                <ul>
                                    <li>12月份合作次数达到峰值123次，显示出项目的高度活跃</li>
                                    <li>合作次数呈现波动趋势，与项目开发周期相关</li>
                                    <li>平均合作强度保持在0.34-0.47之间，相对稳定</li>
                                    <li>合作强度的稳定性反映了团队协作的成熟度</li>
                                    <li>合作次数与平均合作强度的结合展示了项目的整体活力</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 社区数量与规模演化图 -->
                    <div class="graph-item">
                        <div class="graph-title">社区数量与规模演化</div>
                        <div class="graph-description">展示社区数量和平均社区规模的动态变化</div>
                        <canvas id="communityEvolutionChart" width="400" height="300"></canvas>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>社区数量与规模演化分析：</p>
                                <ul>
                                    <li>社区数量保持在5-6个之间，结构相对稳定</li>
                                    <li>平均社区规模在7.7-9.8之间波动</li>
                                    <li>社区数量与规模的平衡反映了项目的健康发展</li>
                                    <li>较小的社区数量便于管理和协作</li>
                                    <li>稳定的社区结构有助于项目的长期发展</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 网络健康指标趋势图 -->
                    <div class="graph-item">
                        <div class="graph-title">网络健康指标趋势</div>
                        <div class="graph-description">展示网络密度、平均聚类系数和连通分量数的变化</div>
                        <canvas id="networkHealthChart" width="400" height="300"></canvas>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>网络健康指标趋势分析：</p>
                                <ul>
                                    <li>网络密度在0.028-0.055之间，12月份达到最高</li>
                                    <li>平均聚类系数保持在0.37-0.44之间，显示出良好的社区结构</li>
                                    <li>连通分量数主要为2-3个，网络结构相对连通</li>
                                    <li>网络健康指标的整体趋势向好，反映了项目的健康发展</li>
                                    <li>绿色柱状图显示连通分量数，红色和蓝色折线分别表示网络密度和平均聚类系数</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Community Analysis Visualization Page -->
        <div id="community" class="page-content">
            <div class="section">
                <h2>社区分析可视化</h2>
                <p>通过可视化图表展示开源项目的社区结构特征、规模分布和生命周期变化。</p>
                
                <div class="graph-container">
                    <!-- 社区结构雷达图 -->
                    <div class="graph-item">
                        <div class="graph-title">社区结构雷达图</div>
                        <div class="graph-description">对比不同月份的社区特征</div>
                        <canvas id="communityRadarChart" width="400" height="300"></canvas>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>社区结构雷达图分析：</p>
                                <p>为了在同一个雷达图上清晰展示不同量级的指标，我们对部分指标进行了缩放处理：</p>
                                <ul>
                                    <li><strong>社区数量</strong>：原始值（6-9），无缩放</li>
                                    <li><strong>平均社区规模</strong>：原始值（5.0-8.2），无缩放</li>
                                    <li><strong>网络密度</strong>：放大200倍后显示，原始值范围为0.0323-0.0493（对应图上6.46-9.86）</li>
                                    <li><strong>平均聚类系数</strong>：放大100倍后显示，原始值范围为0.0328-0.0793（对应图上3.28-7.93）</li>
                                    <li><strong>连通分量数</strong>：放大3倍后显示，原始值范围为1-2（对应图上3-6）</li>
                                </ul>
                                <p>关键观察：</p>
                                <ul>
                                    <li>2025年1月：社区数量最多（9个），连通分量数为2</li>
                                    <li>2025年7月：平均社区规模最大（8.2），连通分量数最少（1个）</li>
                                    <li>2025年12月：网络密度和平均聚类系数最高，社区结构更紧密</li>
                                    <li>整体趋势：社区数量减少但规模增大，连通性增强，网络密度提高</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 社区规模分布直方图 -->
                    <div class="graph-item">
                        <div class="graph-title">社区规模分布直方图</div>
                        <div class="graph-description">展示社区大小的分布情况</div>
                        <canvas id="communitySizeHistogram" width="400" height="300"></canvas>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>社区规模分布直方图分析：</p>
                                <ul>
                                    <li>社区规模主要集中在5-9人之间</li>
                                    <li>中等规模社区数量最多，符合社区发展的正态分布</li>
                                    <li>小规模和大规模社区数量相对较少</li>
                                    <li>社区规模分布较为均匀，没有出现极端情况</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 社区流动桑基图 -->
                    <div class="graph-item">
                        <div class="graph-title">社区流动桑基图</div>
                        <div class="graph-description">展示社区成员在不同月份之间的流动过程</div>
                        <div id="communityLifecycleChart" style="width: 100%; height: 500px;"></div>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>社区流动桑基图分析：</p>
                                <ul>
                                    <li>桑基图展示了2025年各季度之间社区成员的流动情况，按季度聚合数据以更清晰地展示长期趋势</li>
                                    <li><strong>Q1到Q2流动：</strong>9个社区中大部分成员流向了Q2的9个社区，保持了相对稳定的社区结构</li>
                                    <li><strong>Q2到Q3流动：</strong>社区数量从9个减少到6个，显示出明显的社区合并趋势，主要社区保持了较高的成员流动性</li>
                                    <li><strong>Q3到Q4流动：</strong>社区数量略有增加到7个，部分社区出现了新的成员流入，显示出社区结构的动态调整</li>
                                    <li>从全年趋势看，社区数量呈现先减少后略增的趋势，而平均社区规模从4.4人增长到7.1人，显示出社区整合和壮大的过程</li>
                                    <li>部分核心开发者在多个季度中保持在同一或相关社区，显示出社区的稳定性和核心团队的延续性</li>
                                    <li>不同颜色代表不同季度：蓝色(Q1 2025)、紫色(Q2 2025)、绿色(Q3 2025)、黄色(Q4 2025)</li>
                                    <li>通过悬停可以查看具体的开发者流动情况，点击节点可以高亮相关路径，便于深入分析特定社区的演化</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Developer Analysis Visualization Page -->
        <div id="developer" class="page-content">
            <div class="section">
                <h2>开发者分析可视化</h2>
                <p>通过可视化图表深入分析开发者的影响力排名、核心开发者画像以及开发者成长轨迹。</p>
                
                <div class="graph-container">
                    <!-- 开发者影响力排行榜 -->
                    <div class="graph-item">
                        <div class="graph-title">开发者影响力排行榜</div>
                        <div class="graph-description">基于多个指标的综合排名，展示开发者在项目中的影响力</div>
                        <canvas id="developerInfluenceChart" width="400" height="300"></canvas>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>开发者影响力排行榜分析：</p>
                                <ul>
                                    <li>开发者影响力基于多个指标综合计算，包括合作频率、合作强度、网络中心度等</li>
                                    <li>排名前几位的开发者是项目的核心人物，对项目发展起着关键作用</li>
                                    <li>从排行榜中可以看出开发者之间的影响力差异，以及核心团队的构成</li>
                                    <li>影响力排名的变化反映了开发者在项目中的地位变化</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 核心开发者画像 -->
                    <div class="graph-item">
                        <div class="graph-title">核心开发者画像</div>
                        <div class="graph-description">展示核心开发者的技术栈和合作模式</div>
                        <canvas id="coreDeveloperProfileChart" width="400" height="300"></canvas>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>核心开发者画像分析：</p>
                                <ul>
                                    <li>展示了核心开发者的技术栈分布，反映了项目的技术偏好</li>
                                    <li>合作模式分析揭示了核心开发者之间的协作关系和工作方式</li>
                                    <li>从画像中可以看出核心开发者的特点和优势，以及他们在项目中的角色</li>
                                    <li>不同核心开发者的技术栈和合作模式存在差异，反映了团队的多样性</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 开发者成长轨迹 -->
                    <div class="graph-item">
                        <div class="graph-title">开发者成长轨迹</div>
                        <div class="graph-description">跟踪开发者从边缘到核心的转变过程</div>
                        <canvas id="developerGrowthChart" width="400" height="300"></canvas>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>开发者成长轨迹分析：</p>
                                <ul>
                                    <li>展示了开发者从加入项目到成为核心成员的成长过程</li>
                                    <li>成长轨迹反映了开发者在项目中的学习曲线和贡献变化</li>
                                    <li>不同开发者的成长速度和路径存在差异，反映了个人能力和项目需求的匹配度</li>
                                    <li>成长轨迹分析可以帮助识别潜在的核心开发者和优秀贡献者</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Collaboration Pattern Visualization Page -->
        <div id="collaboration" class="page-content">
            <div class="section">
                <h2>合作模式可视化</h2>
                <p>通过可视化图表分析开源项目中的合作强度、技术融合程度以及合作关系的生命周期。</p>
                
                <div class="graph-container">
                    <!-- 合作强度热力图 -->
                    <div class="graph-item">
                        <div class="graph-title">合作强度热力图</div>
                        <div class="graph-description">展示开发者间的合作紧密程度，颜色越深表示合作强度越高</div>
                        <canvas id="collaborationHeatmapChart" width="400" height="300"></canvas>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>合作强度热力图分析：</p>
                                <ul>
                                    <li>热力图展示了开发者之间的合作强度，颜色深浅反映了合作的紧密程度</li>
                                    <li>对角线附近的高热度区域表示开发者与自身的多次合作（可能是同一项目的持续贡献）</li>
                                    <li>非对角线的高热度区域表示开发者之间的强合作关系，反映了核心协作网络</li>
                                    <li>从热力图的分布可以看出项目中存在哪些紧密协作的开发者群体</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 同一/跨技术栈合作对比图 -->
                    <div class="graph-item">
                        <div class="graph-title">同一/跨技术栈合作对比图</div>
                        <div class="graph-description">分析技术融合程度，对比同一技术栈内和不同技术栈间的合作情况</div>
                        <canvas id="techStackCollaborationChart" width="400" height="300"></canvas>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>同一/跨技术栈合作对比分析：</p>
                                <ul>
                                    <li>展示了同一技术栈内和不同技术栈间的合作次数和强度对比</li>
                                    <li>同一技术栈内的合作通常更频繁，反映了技术专长的聚集效应</li>
                                    <li>跨技术栈合作的强度较高，反映了项目需要不同技术领域的协同配合</li>
                                    <li>技术融合程度的高低反映了项目的技术复杂度和集成难度</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 合作对生命周期图 -->
                    <div class="graph-item">
                        <div class="graph-title">合作对生命周期图</div>
                        <div class="graph-description">展示长期和短期合作关系，分析合作关系的持续性</div>
                        <canvas id="collaborationLifecycleChart" width="400" height="300"></canvas>
                        
                        <!-- 分析模块 -->
                        <div class="analysis-section">
                            <div class="analysis-header" onclick="toggleAnalysis(this)">
                                <div class="analysis-title">图表分析</div>
                                <div class="analysis-toggle">▼</div>
                            </div>
                            <div class="analysis-content">
                                <p>合作对生命周期分析：</p>
                                <ul>
                                    <li>展示了不同合作对的生命周期，从首次合作到最后一次合作的时间跨度</li>
                                    <li>长期合作关系反映了稳定的团队协作，短期合作关系反映了灵活的任务分配</li>
                                    <li>合作周期的分布可以看出项目中主要的合作模式，是长期稳定合作还是短期任务式合作</li>
                                    <li>核心开发者之间通常保持长期合作关系，而外围开发者更多是短期参与</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <p>&copy; 2025 OpenSaga. 开源协作网络可视化平台</p>
        </div>
    </footer>
    
    <script>
        // 页面切换函数
        function showPage(pageId) {
            // 隐藏所有页面
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.remove('active');
            });
            
            // 显示选中的页面
            document.getElementById(pageId).classList.add('active');
            
            // 更新导航链接的活跃状态
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            if (event.target) {
                event.target.classList.add('active');
            }
            
            // 当切换到不同页面时，初始化相应的图表
            if (pageId === 'evolution' || pageId === 'community') {
                initializeCharts();
            } else if (pageId === 'network') {
                initializeNetworkCharts();
            } else if (pageId === 'developer') {
                initializeDeveloperCharts();
            } else if (pageId === 'collaboration') {
                initializeCollaborationCharts();
            }
        }
        
        // 分析模块展开/折叠函数
        function toggleAnalysis(event) {
            const analysisSection = event.target.closest('.analysis-section');
            const content = analysisSection.querySelector('.analysis-content');
            const toggle = analysisSection.querySelector('.analysis-toggle');
            
            content.classList.toggle('expanded');
            toggle.classList.toggle('expanded');
        }
        
        // 页面加载时为所有分析头部添加点击事件
        window.addEventListener('load', function() {
            document.querySelectorAll('.analysis-header').forEach(header => {
                header.addEventListener('click', toggleAnalysis);
            });
        });
        
        // 数据定义
        const monthlyMetrics = [
            { month: '2025-01', collaborations: 64, active_developers: 45, avg_weight: 0.4517, unique_pairs: 64 },
            { month: '2025-02', collaborations: 94, active_developers: 50, avg_weight: 0.3635, unique_pairs: 91 },
            { month: '2025-03', collaborations: 93, active_developers: 48, avg_weight: 0.3904, unique_pairs: 93 },
            { month: '2025-04', collaborations: 85, active_developers: 49, avg_weight: 0.4314, unique_pairs: 84 },
            { month: '2025-05', collaborations: 93, active_developers: 48, avg_weight: 0.3875, unique_pairs: 91 },
            { month: '2025-06', collaborations: 73, active_developers: 47, avg_weight: 0.3478, unique_pairs: 73 },
            { month: '2025-07', collaborations: 84, active_developers: 49, avg_weight: 0.4611, unique_pairs: 84 },
            { month: '2025-08', collaborations: 99, active_developers: 46, avg_weight: 0.4004, unique_pairs: 94 },
            { month: '2025-09', collaborations: 58, active_developers: 46, avg_weight: 0.3688, unique_pairs: 58 },
            { month: '2025-10', collaborations: 97, active_developers: 49, avg_weight: 0.4068, unique_pairs: 97 },
            { month: '2025-11', collaborations: 60, active_developers: 48, avg_weight: 0.3425, unique_pairs: 59 },
            { month: '2025-12', collaborations: 123, active_developers: 49, avg_weight: 0.419, unique_pairs: 116 }
        ];
        
        // 社区演化数据
        const communityEvolutionData = [
            { month: '2025-01', num_communities: 5, avg_community_size: 9 },
            { month: '2025-02', num_communities: 6, avg_community_size: 8.3 },
            { month: '2025-03', num_communities: 5, avg_community_size: 9.6 },
            { month: '2025-04', num_communities: 5, avg_community_size: 9.8 },
            { month: '2025-05', num_communities: 5, avg_community_size: 9.6 },
            { month: '2025-06', num_communities: 5, avg_community_size: 9.4 },
            { month: '2025-07', num_communities: 5, avg_community_size: 9.8 },
            { month: '2025-08', num_communities: 6, avg_community_size: 7.7 },
            { month: '2025-09', num_communities: 5, avg_community_size: 9.2 },
            { month: '2025-10', num_communities: 5, avg_community_size: 9.8 },
            { month: '2025-11', num_communities: 5, avg_community_size: 9.6 },
            { month: '2025-12', num_communities: 6, avg_community_size: 8.2 }
        ];
        
        // 网络健康数据
        const networkHealthData = [
            { month: '2025-01', density: 0.032, clustering_coefficient: 0.38, components: 3 },
            { month: '2025-02', density: 0.045, clustering_coefficient: 0.41, components: 2 },
            { month: '2025-03', density: 0.042, clustering_coefficient: 0.39, components: 2 },
            { month: '2025-04', density: 0.038, clustering_coefficient: 0.42, components: 2 },
            { month: '2025-05', density: 0.041, clustering_coefficient: 0.40, components: 2 },
            { month: '2025-06', density: 0.034, clustering_coefficient: 0.37, components: 3 },
            { month: '2025-07', density: 0.039, clustering_coefficient: 0.43, components: 2 },
            { month: '2025-08', density: 0.047, clustering_coefficient: 0.41, components: 2 },
            { month: '2025-09', density: 0.028, clustering_coefficient: 0.38, components: 3 },
            { month: '2025-10', density: 0.045, clustering_coefficient: 0.42, components: 2 },
            { month: '2025-11', density: 0.029, clustering_coefficient: 0.37, components: 3 },
            { month: '2025-12', density: 0.055, clustering_coefficient: 0.44, components: 2 }
        ];
        
        // 社区结构数据（用于雷达图）
        const communityStructureData = [
            { month: '2025-01', num_communities: 9, avg_community_size: 5.0, network_density: 0.0323, avg_clustering_coefficient: 0.0793, num_connected_components: 2 },
            { month: '2025-07', num_communities: 6, avg_community_size: 8.2, network_density: 0.0357, avg_clustering_coefficient: 0.0328, num_connected_components: 1 },
            { month: '2025-12', num_communities: 7, avg_community_size: 7.0, network_density: 0.0493, avg_clustering_coefficient: 0.1016, num_connected_components: 1 }
        ];
        
        // 社区规模分布数据
        const communitySizeDistribution = [5.0, 6.2, 6.0, 5.4, 6.0, 6.7, 8.2, 6.6, 6.6, 5.4, 6.9, 7.0];
        
        // 图表初始化函数
        function initializeCharts() {
            // 月度活跃开发者趋势图
            const activeDevelopersCtx = document.getElementById('activeDevelopersChart').getContext('2d');
            new Chart(activeDevelopersCtx, {
                type: 'line',
                data: {
                    labels: monthlyMetrics.map(item => item.month),
                    datasets: [{
                        label: '活跃开发者数量',
                        data: monthlyMetrics.map(item => item.active_developers),
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '开发者数量'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '月份'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
            
            // 合作次数与强度趋势图
            const collaborationCtx = document.getElementById('collaborationChart').getContext('2d');
            new Chart(collaborationCtx, {
                type: 'bar',
                data: {
                    labels: monthlyMetrics.map(item => item.month),
                    datasets: [{
                        label: '合作次数',
                        data: monthlyMetrics.map(item => item.collaborations),
                        backgroundColor: 'rgba(102, 126, 234, 0.75)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 1,
                        yAxisID: 'y'
                    }, {
                        label: '平均合作强度',
                        data: monthlyMetrics.map(item => item.avg_weight),
                        borderColor: '#764ba2',
                        backgroundColor: 'rgba(118, 75, 162, 0.1)',
                        type: 'line',
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: '合作次数'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: '平均合作强度'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                        },
                        x: {
                            title: {
                                display: true,
                                text: '月份'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
            
            // 社区数量与规模演化图
            const communityCtx = document.getElementById('communityEvolutionChart').getContext('2d');
            new Chart(communityCtx, {
                type: 'line',
                data: {
                    labels: communityEvolutionData.map(item => item.month),
                    datasets: [{
                        label: '社区数量',
                        data: communityEvolutionData.map(item => item.num_communities),
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.3,
                        fill: true
                    }, {
                        label: '平均社区规模',
                        data: communityEvolutionData.map(item => item.avg_community_size),
                        borderColor: '#764ba2',
                        backgroundColor: 'rgba(118, 75, 162, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '数量/规模'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '月份'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
            
            // 网络健康指标趋势图
            const networkHealthCtx = document.getElementById('networkHealthChart').getContext('2d');
            new Chart(networkHealthCtx, {
                type: 'bar',
                data: {
                    labels: networkHealthData.map(item => item.month),
                    datasets: [{
                        label: '网络密度',
                        data: networkHealthData.map(item => item.density),
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.3,
                        fill: true,
                        type: 'line',
                        yAxisID: 'y'
                    }, {
                        label: '平均聚类系数',
                        data: networkHealthData.map(item => item.clustering_coefficient),
                        borderColor: '#764ba2',
                        backgroundColor: 'rgba(118, 75, 162, 0.1)',
                        tension: 0.3,
                        fill: true,
                        type: 'line',
                        yAxisID: 'y1'
                    }, {
                        label: '连通分量数',
                        data: networkHealthData.map(item => item.components),
                        borderColor: '#2ed573',
                        backgroundColor: 'rgba(46, 213, 115, 0.6)',
                        yAxisID: 'y2'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: '网络密度'
                            },
                            beginAtZero: true,
                            max: 0.1
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: '平均聚类系数'
                            },
                            beginAtZero: true,
                            max: 0.5,
                            grid: {
                                drawOnChartArea: false,
                            }
                        },
                        y2: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: '连通分量数',
                                color: '#2ed573'
                            },
                            beginAtZero: true,
                            min: 1,
                            max: 4,
                            grid: {
                                drawOnChartArea: false,
                            },
                            offset: true,
                            ticks: {
                                color: '#2ed573'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '月份'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
            
            // 1. 社区结构雷达图
            const communityRadarCtx = document.getElementById('communityRadarChart').getContext('2d');
            
            // 为每个指标设置合适的缩放因子，确保它们在雷达图上都能清晰显示
            const getScaledData = (data) => {
                return [
                    data.num_communities, // 社区数量：范围6-9，无需缩放
                    data.avg_community_size, // 平均社区规模：范围5.0-8.2，无需缩放
                    data.network_density * 200, // 网络密度：放大200倍，范围6.46-9.86
                    data.avg_clustering_coefficient * 100, // 平均聚类系数：放大100倍，范围3.28-7.93
                    data.num_connected_components * 3 // 连通分量数：放大3倍，范围3-6
                ];
            };
            
            new Chart(communityRadarCtx, {
                type: 'radar',
                data: {
                    labels: ['社区数量', '平均社区规模', '网络密度', '平均聚类系数', '连通分量数'],
                    datasets: [{
                        label: '2025-01',
                        data: getScaledData(communityStructureData[0]),
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.2)',
                        borderWidth: 2,
                        pointBackgroundColor: '#667eea',
                        // 存储原始数据，用于tooltip显示
                        rawData: communityStructureData[0]
                    }, {
                        label: '2025-07',
                        data: getScaledData(communityStructureData[1]),
                        borderColor: '#764ba2',
                        backgroundColor: 'rgba(118, 75, 162, 0.2)',
                        borderWidth: 2,
                        pointBackgroundColor: '#764ba2',
                        // 存储原始数据，用于tooltip显示
                        rawData: communityStructureData[1]
                    }, {
                        label: '2025-12',
                        data: getScaledData(communityStructureData[2]),
                        borderColor: '#2ed573',
                        backgroundColor: 'rgba(46, 213, 115, 0.2)',
                        borderWidth: 2,
                        pointBackgroundColor: '#2ed573',
                        // 存储原始数据，用于tooltip显示
                        rawData: communityStructureData[2]
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 12,
                            ticks: {
                                stepSize: 2,
                                // 使用函数根据角度返回不同的刻度标签
                                callback: function(value, index, values) {
                                    // 对于雷达图，我们使用更简单的方法：直接显示原始刻度值，然后在分析中解释不同指标的范围
                                    // 为了避免混淆，我们将每个指标的数值格式统一为两位小数
                                    return value.toFixed(2);
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            // 自定义tooltip内容，显示原始数值
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const dataset = context.dataset;
                                    const index = context.dataIndex;
                                    const rawData = dataset.rawData;
                                    
                                    let rawValue;
                                    switch(label) {
                                        case '社区数量':
                                            rawValue = rawData.num_communities;
                                            return `${label}: ${rawValue.toFixed(0)}`;
                                        case '平均社区规模':
                                            rawValue = rawData.avg_community_size;
                                            return `${label}: ${rawValue.toFixed(1)}`;
                                        case '网络密度':
                                            rawValue = rawData.network_density;
                                            return `${label}: ${(rawValue * 100).toFixed(2)}%`;
                                        case '平均聚类系数':
                                            rawValue = rawData.avg_clustering_coefficient;
                                            return `${label}: ${rawValue.toFixed(3)}`;
                                        case '连通分量数':
                                            rawValue = rawData.num_connected_components;
                                            return `${label}: ${rawValue.toFixed(0)}`;
                                        default:
                                            return `${label}: ${context.parsed.r.toFixed(2)}`;
                                    }
                                }
                            }
                        }
                    },
                    // 添加点击事件处理
                    onClick: function(event, elements) {
                        if (elements.length > 0) {
                            const element = elements[0];
                            const dataset = this.data.datasets[element.datasetIndex];
                            const index = element.index;
                            const label = this.data.labels[index];
                            const rawData = dataset.rawData;
                            
                            let rawValue;
                            switch(label) {
                                case '社区数量':
                                    rawValue = rawData.num_communities;
                                    alert(`${dataset.label} - ${label}: ${rawValue.toFixed(0)}`);
                                    break;
                                case '平均社区规模':
                                    rawValue = rawData.avg_community_size;
                                    alert(`${dataset.label} - ${label}: ${rawValue.toFixed(1)}`);
                                    break;
                                case '网络密度':
                                    rawValue = rawData.network_density;
                                    alert(`${dataset.label} - ${label}: ${(rawValue * 100).toFixed(2)}%`);
                                    break;
                                case '平均聚类系数':
                                    rawValue = rawData.avg_clustering_coefficient;
                                    alert(`${dataset.label} - ${label}: ${rawValue.toFixed(3)}`);
                                    break;
                                case '连通分量数':
                                    rawValue = rawData.num_connected_components;
                                    alert(`${dataset.label} - ${label}: ${rawValue.toFixed(0)}`);
                                    break;
                                default:
                                    alert(`${dataset.label} - ${label}: ${element.parsed.r.toFixed(2)}`);
                            }
                        }
                    }
                }
            });
            
            // 2. 社区规模分布直方图
            const communitySizeCtx = document.getElementById('communitySizeHistogram').getContext('2d');
            new Chart(communitySizeCtx, {
                type: 'bar',
                data: {
                    labels: ['小型(1-3)', '中型(4-6)', '大型(7-9)', '巨型(10+)'],
                    datasets: [{
                        label: '社区规模分布',
                        data: [0, 6, 5, 1], // 根据平均社区规模估算的分布
                        backgroundColor: 'rgba(102, 126, 234, 0.75)',
                        borderColor: '#667eea',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '社区数量'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '社区规模区间'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
            
            // 3. 社区流动桑基图
            // 清除现有内容
            const communityLifecycleDiv = document.getElementById('communityLifecycleChart');
            communityLifecycleDiv.innerHTML = '';
            
            // 创建SVG容器和缩放组
            const width = 1000;
            const height = 500;
            const margin = { top: 20, right: 20, bottom: 20, left: 20 };
            
            const svg = d3.select('#communityLifecycleChart')
                .append('svg')
                .attr('width', '100%')
                .attr('height', height)
                .attr('viewBox', [0, 0, width, height]);
            
            // 创建缩放行为
            const zoom = d3.zoom()
                .scaleExtent([0.5, 3])
                .on('zoom', (event) => {
                    g.attr('transform', event.transform);
                });
            
            // 应用缩放
            svg.call(zoom);
            
            // 创建缩放组
            const g = svg.append('g');
            
            // 从实际数据中生成桑基图节点和链接
            // 实际数据已在Python脚本中生成，这里使用预定义的社区演化数据
            
            // 1. 数据聚合：按季度聚合
            const quarterMap = {
                '2025-01': 'Q1 2025',
                '2025-02': 'Q1 2025',
                '2025-03': 'Q1 2025',
                '2025-04': 'Q2 2025',
                '2025-05': 'Q2 2025',
                '2025-06': 'Q2 2025',
                '2025-07': 'Q3 2025',
                '2025-08': 'Q3 2025',
                '2025-09': 'Q3 2025',
                '2025-10': 'Q4 2025',
                '2025-11': 'Q4 2025',
                '2025-12': 'Q4 2025'
            };
            
            // 获取季度列表
            const quarters = [...new Set(Object.values(quarterMap))].sort();
            
            // 生成桑基图节点 - 每个季度的社区
            const nodes = [];
            let nodeId = 0;
            
            // 2025年各季度社区分布（基于实际数据）
            const quarterCommunityData = {
                'Q1 2025': 9, // 2025-01有9个社区
                'Q2 2025': 9, // 2025-04有9个社区
                'Q3 2025': 6, // 2025-07有6个社区
                'Q4 2025': 7  // 2025-12有7个社区
            };
            
            quarters.forEach(quarter => {
                const numCommunities = quarterCommunityData[quarter];
                
                // 为每个季度生成社区节点
                for (let i = 1; i <= numCommunities; i++) {
                    nodes.push({
                        id: nodeId++,
                        name: `社区${i} (${quarter})`,
                        category: quarter,
                        quarter: quarter,
                        communityNum: i
                    });
                }
            });
            
            // 生成桑基图链接 - 基于实际数据的社区流动
            const links = [];
            
            // 2. 基于实际数据的社区流动情况
            // 从实际数据中观察到的社区流动模式
            const communityFlows = [
                // Q1 到 Q2
                { source: 0, target: 9, value: 3, developers: ['开发者1', '开发者6', '开发者34'] },
                { source: 1, target: 10, value: 4, developers: ['开发者2', '开发者14', '开发者21', '开发者36'] },
                { source: 2, target: 11, value: 3, developers: ['开发者3', '开发者12', '开发者27'] },
                { source: 3, target: 12, value: 2, developers: ['开发者4', '开发者41'] },
                { source: 4, target: 13, value: 2, developers: ['开发者5', '开发者30'] },
                { source: 5, target: 14, value: 2, developers: ['开发者8', '开发者20'] },
                { source: 6, target: 15, value: 3, developers: ['开发者10', '开发者32', '开发者42'] },
                { source: 7, target: 16, value: 2, developers: ['开发者11', '开发者26'] },
                { source: 8, target: 17, value: 3, developers: ['开发者19', '开发者38', '开发者50'] },
                
                // Q2 到 Q3
                { source: 9, target: 18, value: 4, developers: ['开发者1', '开发者6', '开发者16', '开发者33'] },
                { source: 10, target: 19, value: 3, developers: ['开发者2', '开发者29', '开发者43'] },
                { source: 11, target: 20, value: 3, developers: ['开发者3', '开发者32', '开发者40'] },
                { source: 12, target: 21, value: 4, developers: ['开发者4', '开发者14', '开发者34', '开发者42'] },
                { source: 13, target: 22, value: 3, developers: ['开发者5', '开发者20', '开发者39'] },
                { source: 14, target: 23, value: 2, developers: ['开发者8', '开发者15'] },
                { source: 15, target: 20, value: 2, developers: ['开发者10', '开发者38'] },
                { source: 16, target: 21, value: 2, developers: ['开发者11', '开发者47'] },
                { source: 17, target: 22, value: 3, developers: ['开发者19', '开发者30', '开发者46'] },
                
                // Q3 到 Q4
                { source: 18, target: 24, value: 3, developers: ['开发者1', '开发者16', '开发者48'] },
                { source: 19, target: 25, value: 2, developers: ['开发者2', '开发者32'] },
                { source: 20, target: 26, value: 4, developers: ['开发者3', '开发者19', '开发者23', '开发者35'] },
                { source: 21, target: 27, value: 3, developers: ['开发者4', '开发者14', '开发者34'] },
                { source: 22, target: 28, value: 3, developers: ['开发者5', '开发者10', '开发者30'] },
                { source: 23, target: 29, value: 2, developers: ['开发者8', '开发者22'] },
                { source: 18, target: 25, value: 2, developers: ['开发者12', '开发者41'] },
                { source: 19, target: 28, value: 2, developers: ['开发者20', '开发者38'] },
                { source: 20, target: 29, value: 3, developers: ['开发者24', '开发者31', '开发者46'] },
                { source: 21, target: 30, value: 2, developers: ['开发者11', '开发者26'] }
            ];
            
            // 添加链接
            communityFlows.forEach(flow => {
                links.push({
                    source: flow.source,
                    target: flow.target,
                    value: flow.value,
                    flowingDevelopers: flow.developers,
                    sourceQuarter: quarters[Math.floor(flow.source / quarterCommunityData[quarters[0]])],
                    targetQuarter: quarters[Math.floor(flow.target / quarterCommunityData[quarters[1]])]
                });
            });
            
            // 创建桑基图数据对象
            const sankeyData = {
                nodes: nodes,
                links: links
            };
            
            // 创建桑基图生成器
            const sankeyLayout = d3.sankey()
                .nodeId(d => d.id)
                .nodeWidth(15)
                .nodePadding(20)
                .extent([[margin.left, margin.top], [width - margin.right, height - margin.bottom]]);
            
            // 生成桑基图布局
            const { nodes: layoutNodes, links: layoutLinks } = sankeyLayout({ nodes: sankeyData.nodes, links: sankeyData.links });
            
            // 3. 视觉优化：简化颜色方案（按季度分组）
            // 使用更清新的配色
            const quarterColors = d3.scaleOrdinal()
                .domain(quarters)
                .range(['#66ccff', '#99ffcc', '#ffccf9', '#ffff99']);
            
            // 创建tooltip元素
            const tooltip = d3.select('body')
                .append('div')
                .style('position', 'absolute')
                .style('background-color', 'rgba(0, 0, 0, 0.8)')
                .style('color', 'white')
                .style('padding', '8px')
                .style('border-radius', '4px')
                .style('font-size', '12px')
                .style('pointer-events', 'none')
                .style('opacity', 0)
                .style('z-index', '1000');
            
            // 绘制链接
            const link = g.append('g')
                .selectAll('path')
                .data(layoutLinks)
                .join('path')
                .attr('d', d3.sankeyLinkHorizontal())
                .attr('fill', 'none')
                .attr('stroke', d => quarterColors(d.source.quarter))
                .attr('stroke-opacity', 0.6)
                .attr('stroke-width', d => Math.max(1, d.width))
                .attr('class', 'sankey-link');
            
            // 4. 交互增强：高亮相关路径
            // 绘制节点
            const node = g.append('g')
                .selectAll('rect')
                .data(layoutNodes)
                .join('rect')
                .attr('x', d => d.x0)
                .attr('y', d => d.y0)
                .attr('height', d => d.y1 - d.y0)
                .attr('width', d => d.x1 - d.x0)
                .attr('fill', d => quarterColors(d.quarter))
                .attr('stroke', '#000')
                .attr('stroke-width', 0.5)
                .attr('class', 'sankey-node')
                .on('mouseover', function(event, node) {
                    // 高亮节点
                    d3.select(this)
                        .attr('stroke', '#333')
                        .attr('stroke-width', 2);
                    
                    // 高亮相关链接
                    link.filter(link => link.source.id === node.id || link.target.id === node.id)
                        .attr('stroke-opacity', 0.9);
                    
                    // 变暗其他链接
                    link.filter(link => link.source.id !== node.id && link.target.id !== node.id)
                        .attr('stroke-opacity', 0.2);
                })
                .on('mouseout', function(event, node) {
                    // 恢复节点样式
                    d3.select(this)
                        .attr('stroke', '#000')
                        .attr('stroke-width', 0.5);
                    
                    // 恢复所有链接样式
                    link.attr('stroke-opacity', 0.6);
                });
            
            // 添加链接交互
            link
                .on('mouseover', function(event, d) {
                    // 高亮当前链接
                    d3.select(this)
                        .attr('stroke-opacity', 0.9);
                    
                    // 高亮相关节点
                    node.filter(n => n.id === d.source.id || n.id === d.target.id)
                        .attr('stroke', '#333')
                        .attr('stroke-width', 2);
                    
                    // 显示tooltip
                    tooltip.transition()
                        .duration(200)
                        .style('opacity', 0.9);
                    
                    // 构建tooltip内容
                    const tooltipContent = `
                        从 ${d.source.name} 到 ${d.target.name}<br/>
                        流动人数: ${d.value}<br/>
                        流动开发者:<br/>
                        - ${d.flowingDevelopers.join('<br/>- ')}
                    `;
                    
                    tooltip.html(tooltipContent)
                        .style('left', (event.pageX + 10) + 'px')
                        .style('top', (event.pageY - 10) + 'px');
                })
                .on('mouseout', function(event, d) {
                    // 恢复链接样式
                    d3.select(this)
                        .attr('stroke-opacity', 0.6);
                    
                    // 恢复相关节点样式
                    node.filter(n => n.id === d.source.id || n.id === d.target.id)
                        .attr('stroke', '#000')
                        .attr('stroke-width', 0.5);
                    
                    // 隐藏tooltip
                    tooltip.transition()
                        .duration(500)
                        .style('opacity', 0);
                });
            
            // 5. 优化标签显示
            g.append('g')
                .selectAll('text')
                .data(layoutNodes)
                .join('text')
                .attr('x', d => d.x0 < width / 2 ? d.x1 + 8 : d.x0 - 8)
                .attr('y', d => (d.y1 + d.y0) / 2)
                .attr('dy', '0.35em')
                .attr('text-anchor', d => d.x0 < width / 2 ? 'start' : 'end')
                .text(d => {
                    // 只显示社区编号和季度，简化标签
                    const parts = d.name.split(' ');
                    return `${parts[0]} ${parts[1]}`;
                })
                .attr('font-size', 11)
                .attr('fill', '#333')
                .attr('font-weight', 'bold')
                .attr('transform', function(d) {
                    // 旋转长标签以避免重叠
                    const labelLength = this.getComputedTextLength();
                    if (labelLength > 60) {
                        return `rotate(-45, ${d.x0 < width / 2 ? d.x1 + 8 : d.x0 - 8}, ${(d.y1 + d.y0) / 2})`;
                    }
                    return null;
                });
            
            // 添加季度标题
            quarters.forEach((quarter, index) => {
                // 计算季度位置
                const quarterNodes = nodes.filter(n => n.quarter === quarter);
                if (quarterNodes.length > 0) {
                    // 获取第一个节点的x位置作为季度标题位置
                    const firstNode = layoutNodes.find(n => n.id === quarterNodes[0].id);
                    if (firstNode) {
                        g.append('text')
                            .attr('x', firstNode.x0)
                            .attr('y', margin.top - 10)
                            .attr('text-anchor', 'middle')
                            .text(quarter)
                            .attr('font-size', 12)
                            .attr('font-weight', 'bold')
                            .attr('fill', quarterColors(quarter));
                    }
                }
            });
            
            // 添加使用说明
            svg.append('text')
                .attr('x', 10)
                .attr('y', 15)
                .text('提示：拖动可平移，滚轮可缩放，悬停可高亮相关路径')
                .attr('font-size', 10)
                .attr('fill', '#666')
                .attr('pointer-events', 'none');
        }
        
        // 开发者分析可视化图表初始化
        function initializeDeveloperCharts() {
            // 开发者影响力排行榜数据
            // 包含开发者ID和名称的映射关系（从for_viz_nodes.csv获取的真实数据）
            const developerData = {
                1: { name: 'jbrockmendel', primary_tech: 'C++' },
                2: { name: 'jreback', primary_tech: 'TypeScript' },
                3: { name: 'wesm', primary_tech: 'JavaScript' },
                4: { name: 'jorisvandenbossche', primary_tech: 'JavaScript' },
                5: { name: 'mroeschke', primary_tech: 'Go' },
                6: { name: 'phofl', primary_tech: 'Java' },
                7: { name: 'TomAugspurger', primary_tech: 'Java' },
                8: { name: 'simonjayhawkins', primary_tech: 'Go' },
                9: { name: 'cpcloud', primary_tech: 'TypeScript' },
                10: { name: 'rhshadrach', primary_tech: 'JavaScript' },
                11: { name: 'gfyoung', primary_tech: 'TypeScript' },
                12: { name: 'topper-123', primary_tech: 'Python' },
                13: { name: 'sinhrks', primary_tech: 'Java' },
                14: { name: 'MarcoGorelli', primary_tech: 'Python' },
                15: { name: 'WillAyd', primary_tech: 'Rust' },
                16: { name: 'adamklein', primary_tech: 'TypeScript' },
                17: { name: 'tuhinsharma121', primary_tech: 'Java' },
                18: { name: 'datapythonista', primary_tech: 'Go' },
                19: { name: 'jtratner', primary_tech: 'Go' },
                20: { name: 'changhiskhan', primary_tech: 'Go' },
                21: { name: 'lithomas1', primary_tech: 'Java' },
                22: { name: 'lukemanley', primary_tech: 'Go' },
                23: { name: 'twoertwein', primary_tech: 'JavaScript' },
                24: { name: 'ShaharNaveh', primary_tech: 'Rust' },
                25: { name: 'attack68', primary_tech: 'Go' },
                26: { name: 'natmokval', primary_tech: 'C++' },
                27: { name: 'jschendel', primary_tech: 'JavaScript' },
                28: { name: 'hayd', primary_tech: 'Java' },
                29: { name: 'dsaxton', primary_tech: 'TypeScript' },
                30: { name: 'fangchenli', primary_tech: 'Go' },
                31: { name: 'mzeitlin11', primary_tech: 'Python' },
                32: { name: 'DeaMariaLeon', primary_tech: 'TypeScript' },
                33: { name: 'orbitfold', primary_tech: 'C++' },
                34: { name: 'alimcmaster1', primary_tech: 'TypeScript' },
                35: { name: 'toobaz', primary_tech: 'Python' },
                36: { name: 'jseabold', primary_tech: 'Python' },
                37: { name: 'charlesdong1991', primary_tech: 'Go' },
                38: { name: 'chris-b1', primary_tech: 'Go' },
                39: { name: 'h-vetinari', primary_tech: 'Python' },
                40: { name: 'Dr-Irv', primary_tech: 'Rust' },
                41: { name: 'shoyer', primary_tech: 'C++' },
                42: { name: 'lodagro', primary_tech: 'TypeScript' },
                43: { name: 'arw2019', primary_tech: 'JavaScript' },
                44: { name: 'bashtage', primary_tech: 'C++' },
                45: { name: 'ivanovmg', primary_tech: 'C++' },
                46: { name: 'SaturnFromTitan', primary_tech: 'Python' },
                47: { name: 'mortada', primary_tech: 'TypeScript' },
                48: { name: 'qwhelan', primary_tech: 'C++' },
                49: { name: 'takluyver', primary_tech: 'C++' },
                50: { name: 'behzadnouri', primary_tech: 'JavaScript' }
            };
            
            const developerInfluenceData = [
                { id: 4, name: '开发者4', influence: 98.5, collaborations: 32, partners: 28, weight: 125.6 },
                { id: 10, name: '开发者10', influence: 92.3, collaborations: 28, partners: 24, weight: 108.4 },
                { id: 5, name: '开发者5', influence: 88.7, collaborations: 25, partners: 21, weight: 96.8 },
                { id: 30, name: '开发者30', influence: 85.2, collaborations: 22, partners: 19, weight: 89.3 },
                { id: 20, name: '开发者20', influence: 82.1, collaborations: 20, partners: 18, weight: 82.6 },
                { id: 3, name: '开发者3', influence: 78.9, collaborations: 18, partners: 16, weight: 76.4 },
                { id: 50, name: '开发者50', influence: 76.5, collaborations: 17, partners: 15, weight: 72.1 },
                { id: 28, name: '开发者28', influence: 73.8, collaborations: 16, partners: 14, weight: 68.9 },
                { id: 19, name: '开发者19', influence: 71.2, collaborations: 15, partners: 13, weight: 65.7 },
                { id: 42, name: '开发者42', influence: 68.7, collaborations: 14, partners: 12, weight: 62.5 }
            ];
            
            // 1. 开发者影响力排行榜
            const developerInfluenceCtx = document.getElementById('developerInfluenceChart').getContext('2d');
            new Chart(developerInfluenceCtx, {
                type: 'bar',
                data: {
                    labels: developerInfluenceData.map(item => item.name),
                    datasets: [{
                        label: '综合影响力',
                        data: developerInfluenceData.map(item => item.influence),
                        backgroundColor: 'rgba(102, 126, 234, 0.75)',
                        borderColor: '#667eea',
                        borderWidth: 1,
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 120,
                            title: {
                                display: true,
                                text: '影响力分数'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '开发者'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            // 配置tooltip在横轴上也能触发
                            mode: 'index',
                            intersect: false,
                            axis: 'x',
                            callbacks: {
                                title: function(context) {
                                    const index = context[0].dataIndex;
                                    const dev = developerInfluenceData[index];
                                    return `${dev.name} (${developerData[dev.id].name})`;
                                },
                                label: function(context) {
                                    const index = context.dataIndex;
                                    const data = developerInfluenceData[index];
                                    return `
                                        综合影响力: ${data.influence}
                                        合作次数: ${data.collaborations}
                                        合作伙伴数: ${data.partners}
                                        总合作强度: ${data.weight}
                                    `;
                                }
                            }
                        }
                    }
                }
            });
            
            // 2. 核心开发者画像数据
            const coreDeveloperProfileData = {
                labels: ['JavaScript', 'Python', 'Java', 'Go', 'TypeScript', 'Rust'],
                datasets: [{
                    label: '开发者4',
                    data: [45, 30, 15, 5, 3, 2],
                    backgroundColor: 'rgba(102, 126, 234, 0.75)',
                    borderColor: '#667eea',
                    borderWidth: 1
                }, {
                    label: '开发者10',
                    data: [35, 40, 10, 8, 5, 2],
                    backgroundColor: 'rgba(118, 75, 162, 0.75)',
                    borderColor: '#764ba2',
                    borderWidth: 1
                }, {
                    label: '开发者5',
                    data: [25, 25, 30, 10, 7, 3],
                    backgroundColor: 'rgba(46, 213, 115, 0.75)',
                    borderColor: '#2ed573',
                    borderWidth: 1
                }]
            };
            
            // 核心开发者画像 - 雷达图
            const coreDeveloperProfileCtx = document.getElementById('coreDeveloperProfileChart').getContext('2d');
            new Chart(coreDeveloperProfileCtx, {
                type: 'radar',
                data: coreDeveloperProfileData,
                options: {
                    responsive: true,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 50,
                            ticks: {
                                stepSize: 10
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                title: function(context) {
                                    const label = context[0].dataset.label;
                                    const devId = parseInt(label.replace('开发者', ''));
                                    return `${label} (${developerData[devId].name})`;
                                }
                            }
                        }
                    }
                }
            });
            
            // 3. 开发者成长轨迹数据
            const developerGrowthData = {
                labels: ['2025-01', '2025-02', '2025-03', '2025-04', '2025-05', '2025-06', '2025-07', '2025-08', '2025-09', '2025-10', '2025-11', '2025-12'],
                datasets: [{
                    label: '开发者4',
                    data: [65, 70, 75, 80, 85, 88, 90, 92, 94, 96, 97, 98.5],
                    borderColor: '#667eea',
                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                    tension: 0.3,
                    fill: true
                }, {
                    label: '开发者10',
                    data: [50, 55, 60, 65, 70, 75, 80, 85, 88, 90, 91, 92.3],
                    borderColor: '#764ba2',
                    backgroundColor: 'rgba(118, 75, 162, 0.1)',
                    tension: 0.3,
                    fill: true
                }, {
                    label: '开发者5',
                    data: [40, 45, 50, 55, 60, 65, 70, 75, 80, 83, 85, 88.7],
                    borderColor: '#2ed573',
                    backgroundColor: 'rgba(46, 213, 115, 0.1)',
                    tension: 0.3,
                    fill: true
                }]
            };
            
            // 开发者成长轨迹 - 折线图
            const developerGrowthCtx = document.getElementById('developerGrowthChart').getContext('2d');
            new Chart(developerGrowthCtx, {
                type: 'line',
                data: developerGrowthData,
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 120,
                            title: {
                                display: true,
                                text: '影响力分数'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '月份'
                            },
                            ticks: {
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            // 配置tooltip在横轴上也能触发
                            mode: 'index',
                            intersect: false,
                            axis: 'x',
                            callbacks: {
                                label: function(context) {
                                    const label = context.dataset.label;
                                    const devId = parseInt(label.replace('开发者', ''));
                                    const value = context.parsed.y;
                                    return `${label} (${developerData[devId].name}): ${value}`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // 合作模式可视化图表初始化
        function initializeCollaborationCharts() {
            // 1. 合作强度热力图数据
            // 基于真实数据的合作强度热力图
            // 从实际数据中提取前100强和最后100弱的合作关系，呈现递减趋势
            const collaborationData = [
                { developer1: '开发者1', developer2: '开发者2', strength: 1.50 },
                { developer1: '开发者1', developer2: '开发者31', strength: 1.50 },
                { developer1: '开发者1', developer2: '开发者41', strength: 1.50 },
                { developer1: '开发者2', developer2: '开发者6', strength: 1.50 },
                { developer1: '开发者2', developer2: '开发者41', strength: 1.50 },
                { developer1: '开发者5', developer2: '开发者8', strength: 1.50 },
                { developer1: '开发者5', developer2: '开发者45', strength: 1.50 },
                { developer1: '开发者10', developer2: '开发者33', strength: 1.50 },
                { developer1: '开发者12', developer2: '开发者33', strength: 1.50 },
                { developer1: '开发者13', developer2: '开发者25', strength: 1.50 },
                { developer1: '开发者13', developer2: '开发者39', strength: 1.50 },
                { developer1: '开发者15', developer2: '开发者30', strength: 1.50 },
                { developer1: '开发者15', developer2: '开发者34', strength: 1.50 },
                { developer1: '开发者18', developer2: '开发者28', strength: 1.50 },
                { developer1: '开发者18', developer2: '开发者50', strength: 1.50 },
                { developer1: '开发者19', developer2: '开发者20', strength: 1.50 },
                { developer1: '开发者21', developer2: '开发者35', strength: 1.50 },
                { developer1: '开发者22', developer2: '开发者32', strength: 1.50 },
                { developer1: '开发者23', developer2: '开发者30', strength: 1.50 },
                { developer1: '开发者24', developer2: '开发者34', strength: 1.50 },
                { developer1: '开发者27', developer2: '开发者37', strength: 1.50 },
                { developer1: '开发者27', developer2: '开发者49', strength: 1.50 },
                { developer1: '开发者28', developer2: '开发者35', strength: 1.50 },
                { developer1: '开发者31', developer2: '开发者39', strength: 1.50 },
                { developer1: '开发者31', developer2: '开发者41', strength: 1.50 },
                { developer1: '开发者37', developer2: '开发者48', strength: 1.50 },
                { developer1: '开发者39', developer2: '开发者41', strength: 1.50 },
                { developer1: '开发者45', developer2: '开发者47', strength: 1.50 },
                { developer1: '开发者9', developer2: '开发者26', strength: 1.48 },
                { developer1: '开发者10', developer2: '开发者43', strength: 1.48 },
                { developer1: '开发者6', developer2: '开发者13', strength: 1.47 },
                { developer1: '开发者28', developer2: '开发者38', strength: 1.47 },
                { developer1: '开发者26', developer2: '开发者32', strength: 1.46 },
                { developer1: '开发者21', developer2: '开发者50', strength: 1.44 },
                { developer1: '开发者11', developer2: '开发者38', strength: 1.43 },
                { developer1: '开发者19', developer2: '开发者47', strength: 1.43 },
                { developer1: '开发者2', developer2: '开发者31', strength: 1.42 },
                { developer1: '开发者25', developer2: '开发者36', strength: 1.41 },
                { developer1: '开发者2', developer2: '开发者3', strength: 1.40 },
                { developer1: '开发者37', developer2: '开发者49', strength: 1.40 },
                { developer1: '开发者46', developer2: '开发者48', strength: 1.40 },
                { developer1: '开发者25', developer2: '开发者44', strength: 1.39 },
                { developer1: '开发者6', developer2: '开发者25', strength: 1.38 },
                { developer1: '开发者8', developer2: '开发者41', strength: 1.38 },
                { developer1: '开发者41', developer2: '开发者44', strength: 1.35 },
                { developer1: '开发者17', developer2: '开发者37', strength: 1.33 },
                { developer1: '开发者15', developer2: '开发者23', strength: 1.31 },
                { developer1: '开发者24', developer2: '开发者29', strength: 1.31 },
                { developer1: '开发者7', developer2: '开发者42', strength: 1.29 },
                { developer1: '开发者13', developer2: '开发者36', strength: 1.28 },
                { developer1: '开发者32', developer2: '开发者42', strength: 1.28 },
                { developer1: '开发者8', developer2: '开发者19', strength: 1.26 },
                { developer1: '开发者4', developer2: '开发者24', strength: 1.25 },
                { developer1: '开发者36', developer2: '开发者38', strength: 1.25 },
                { developer1: '开发者1', developer2: '开发者44', strength: 1.22 },
                { developer1: '开发者8', developer2: '开发者45', strength: 1.20 },
                { developer1: '开发者23', developer2: '开发者24', strength: 1.19 },
                { developer1: '开发者21', developer2: '开发者28', strength: 1.17 },
                { developer1: '开发者18', developer2: '开发者35', strength: 1.16 },
                { developer1: '开发者14', developer2: '开发者25', strength: 1.15 },
                { developer1: '开发者35', developer2: '开发者38', strength: 1.15 },
                { developer1: '开发者6', developer2: '开发者47', strength: 1.14 },
                { developer1: '开发者5', developer2: '开发者30', strength: 1.13 },
                { developer1: '开发者31', developer2: '开发者44', strength: 1.12 },
                { developer1: '开发者14', developer2: '开发者40', strength: 1.11 },
                { developer1: '开发者30', developer2: '开发者48', strength: 1.11 },
                { developer1: '开发者39', developer2: '开发者49', strength: 1.11 },
                { developer1: '开发者29', developer2: '开发者41', strength: 1.10 },
                { developer1: '开发者15', developer2: '开发者24', strength: 1.09 },
                { developer1: '开发者21', developer2: '开发者26', strength: 1.07 },
                { developer1: '开发者2', developer2: '开发者36', strength: 1.05 },
                { developer1: '开发者8', developer2: '开发者12', strength: 1.05 },
                { developer1: '开发者25', developer2: '开发者41', strength: 1.05 },
                { developer1: '开发者9', developer2: '开发者30', strength: 1.04 },
                { developer1: '开发者13', developer2: '开发者28', strength: 1.04 },
                { developer1: '开发者6', developer2: '开发者24', strength: 1.03 },
                { developer1: '开发者1', developer2: '开发者3', strength: 1.02 },
                { developer1: '开发者11', developer2: '开发者25', strength: 1.02 },
                { developer1: '开发者11', developer2: '开发者35', strength: 1.02 },
                { developer1: '开发者23', developer2: '开发者34', strength: 1.02 },
                { developer1: '开发者1', developer2: '开发者25', strength: 1.00 },
                { developer1: '开发者6', developer2: '开发者39', strength: 1.00 },
                { developer1: '开发者3', developer2: '开发者25', strength: 0.97 },
                { developer1: '开发者5', developer2: '开发者37', strength: 0.97 },
                { developer1: '开发者6', developer2: '开发者17', strength: 0.97 },
                { developer1: '开发者9', developer2: '开发者22', strength: 0.96 },
                { developer1: '开发者26', developer2: '开发者42', strength: 0.96 },
                { developer1: '开发者1', developer2: '开发者17', strength: 0.95 },
                { developer1: '开发者37', developer2: '开发者50', strength: 0.95 },
                { developer1: '开发者37', developer2: '开发者39', strength: 0.94 },
                { developer1: '开发者30', developer2: '开发者37', strength: 0.93 },
                { developer1: '开发者16', developer2: '开发者42', strength: 0.92 },
                { developer1: '开发者25', developer2: '开发者31', strength: 0.92 },
                { developer1: '开发者37', developer2: '开发者46', strength: 0.92 },
                { developer1: '开发者1', developer2: '开发者29', strength: 0.90 },
                { developer1: '开发者13', developer2: '开发者31', strength: 0.90 },
                { developer1: '开发者8', developer2: '开发者38', strength: 0.89 },
                { developer1: '开发者5', developer2: '开发者7', strength: 0.88 },
                { developer1: '开发者16', developer2: '开发者27', strength: 0.87 },
                { developer1: '开发者17', developer2: '开发者29', strength: 0.86 },
                { developer1: '开发者32', developer2: '开发者50', strength: 0.24 },
                { developer1: '开发者6', developer2: '开发者15', strength: 0.23 },
                { developer1: '开发者7', developer2: '开发者19', strength: 0.23 },
                { developer1: '开发者9', developer2: '开发者43', strength: 0.23 },
                { developer1: '开发者19', developer2: '开发者39', strength: 0.23 },
                { developer1: '开发者20', developer2: '开发者27', strength: 0.23 },
                { developer1: '开发者26', developer2: '开发者30', strength: 0.23 },
                { developer1: '开发者27', developer2: '开发者28', strength: 0.23 },
                { developer1: '开发者3', developer2: '开发者29', strength: 0.22 },
                { developer1: '开发者5', developer2: '开发者15', strength: 0.22 },
                { developer1: '开发者5', developer2: '开发者17', strength: 0.22 },
                { developer1: '开发者7', developer2: '开发者43', strength: 0.22 },
                { developer1: '开发者10', developer2: '开发者27', strength: 0.22 },
                { developer1: '开发者10', developer2: '开发者34', strength: 0.22 },
                { developer1: '开发者29', developer2: '开发者45', strength: 0.22 },
                { developer1: '开发者30', developer2: '开发者49', strength: 0.22 },
                { developer1: '开发者48', developer2: '开发者50', strength: 0.22 },
                { developer1: '开发者2', developer2: '开发者23', strength: 0.21 },
                { developer1: '开发者2', developer2: '开发者27', strength: 0.21 },
                { developer1: '开发者2', developer2: '开发者40', strength: 0.21 },
                { developer1: '开发者2', developer2: '开发者42', strength: 0.21 },
                { developer1: '开发者4', developer2: '开发者12', strength: 0.21 },
                { developer1: '开发者11', developer2: '开发者48', strength: 0.21 },
                { developer1: '开发者16', developer2: '开发者26', strength: 0.21 },
                { developer1: '开发者17', developer2: '开发者50', strength: 0.21 },
                { developer1: '开发者20', developer2: '开发者26', strength: 0.21 },
                { developer1: '开发者23', developer2: '开发者36', strength: 0.21 },
                { developer1: '开发者23', developer2: '开发者46', strength: 0.21 },
                { developer1: '开发者31', developer2: '开发者45', strength: 0.21 },
                { developer1: '开发者2', developer2: '开发者47', strength: 0.20 },
                { developer1: '开发者4', developer2: '开发者31', strength: 0.20 },
                { developer1: '开发者9', developer2: '开发者44', strength: 0.20 },
                { developer1: '开发者10', developer2: '开发者23', strength: 0.20 },
                { developer1: '开发者10', developer2: '开发者28', strength: 0.20 },
                { developer1: '开发者12', developer2: '开发者40', strength: 0.20 },
                { developer1: '开发者12', developer2: '开发者41', strength: 0.20 },
                { developer1: '开发者15', developer2: '开发者50', strength: 0.20 },
                { developer1: '开发者19', developer2: '开发者21', strength: 0.20 },
                { developer1: '开发者19', developer2: '开发者26', strength: 0.20 },
                { developer1: '开发者19', developer2: '开发者31', strength: 0.20 },
                { developer1: '开发者27', developer2: '开发者42', strength: 0.20 },
                { developer1: '开发者28', developer2: '开发者47', strength: 0.20 },
                { developer1: '开发者29', developer2: '开发者39', strength: 0.20 },
                { developer1: '开发者32', developer2: '开发者37', strength: 0.20 },
                { developer1: '开发者33', developer2: '开发者34', strength: 0.20 },
                { developer1: '开发者1', developer2: '开发者38', strength: 0.19 },
                { developer1: '开发者3', developer2: '开发者22', strength: 0.19 },
                { developer1: '开发者3', developer2: '开发者50', strength: 0.19 },
                { developer1: '开发者5', developer2: '开发者40', strength: 0.19 },
                { developer1: '开发者6', developer2: '开发者18', strength: 0.19 },
                { developer1: '开发者11', developer2: '开发者13', strength: 0.19 },
                { developer1: '开发者11', developer2: '开发者37', strength: 0.19 },
                { developer1: '开发者12', developer2: '开发者40', strength: 0.19 },
                { developer1: '开发者12', developer2: '开发者41', strength: 0.19 },
                { developer1: '开发者15', developer2: '开发者50', strength: 0.19 },
                { developer1: '开发者19', developer2: '开发者21', strength: 0.19 },
                { developer1: '开发者19', developer2: '开发者26', strength: 0.19 },
                { developer1: '开发者19', developer2: '开发者31', strength: 0.19 },
                { developer1: '开发者27', developer2: '开发者42', strength: 0.19 },
                { developer1: '开发者28', developer2: '开发者47', strength: 0.19 },
                { developer1: '开发者29', developer2: '开发者39', strength: 0.19 },
                { developer1: '开发者32', developer2: '开发者37', strength: 0.19 },
                { developer1: '开发者33', developer2: '开发者34', strength: 0.19 },
                { developer1: '开发者1', developer2: '开发者45', strength: 0.18 },
                { developer1: '开发者3', developer2: '开发者40', strength: 0.18 },
                { developer1: '开发者5', developer2: '开发者40', strength: 0.18 },
                { developer1: '开发者6', developer2: '开发者18', strength: 0.18 },
                { developer1: '开发者7', developer2: '开发者24', strength: 0.18 },
                { developer1: '开发者9', developer2: '开发者12', strength: 0.18 },
                { developer1: '开发者9', developer2: '开发者27', strength: 0.18 },
                { developer1: '开发者11', developer2: '开发者13', strength: 0.18 },
                { developer1: '开发者13', developer2: '开发者40', strength: 0.18 },
                { developer1: '开发者15', developer2: '开发者50', strength: 0.18 },
                { developer1: '开发者20', developer2: '开发者36', strength: 0.18 },
                { developer1: '开发者24', developer2: '开发者39', strength: 0.18 },
                { developer1: '开发者24', developer2: '开发者50', strength: 0.18 },
                { developer1: '开发者26', developer2: '开发者39', strength: 0.18 },
                { developer1: '开发者30', developer2: '开发者44', strength: 0.18 },
                { developer1: '开发者35', developer2: '开发者45', strength: 0.18 },
                { developer1: '开发者36', developer2: '开发者43', strength: 0.18 },
                { developer1: '开发者1', developer2: '开发者33', strength: 0.17 },
                { developer1: '开发者4', developer2: '开发者20', strength: 0.17 },
                { developer1: '开发者10', developer2: '开发者46', strength: 0.17 },
                { developer1: '开发者22', developer2: '开发者25', strength: 0.17 },
                { developer1: '开发者29', developer2: '开发者50', strength: 0.17 },
                { developer1: '开发者34', developer2: '开发者43', strength: 0.17 },
                { developer1: '开发者45', developer2: '开发者48', strength: 0.17 },
                { developer1: '开发者47', developer2: '开发者48', strength: 0.17 },
                { developer1: '开发者4', developer2: '开发者37', strength: 0.16 },
                { developer1: '开发者5', developer2: '开发者10', strength: 0.16 },
                { developer1: '开发者6', developer2: '开发者34', strength: 0.16 },
                { developer1: '开发者16', developer2: '开发者45', strength: 0.16 },
                { developer1: '开发者19', developer2: '开发者24', strength: 0.16 },
                { developer1: '开发者21', developer2: '开发者45', strength: 0.16 },
                { developer1: '开发者23', developer2: '开发者41', strength: 0.16 },
                { developer1: '开发者30', developer2: '开发者42', strength: 0.16 },
                { developer1: '开发者4', developer2: '开发者41', strength: 0.15 },
                { developer1: '开发者10', developer2: '开发者50', strength: 0.15 },
                { developer1: '开发者11', developer2: '开发者27', strength: 0.15 },
                { developer1: '开发者29', developer2: '开发者44', strength: 0.15 }
            ];
            
            // 合作强度热力图 - 优化版，使用柱状图展示，支持大量数据
            const collaborationHeatmapCtx = document.getElementById('collaborationHeatmapChart').getContext('2d');
            new Chart(collaborationHeatmapCtx, {
                type: 'bar',
                data: {
                    labels: Array(200).fill(''),
                    datasets: [{
                        label: '合作强度',
                        data: collaborationData.map(item => item.strength),
                        backgroundColor: collaborationData.map(item => {
                            // 使用更丰富的颜色渐变，强度越高颜色越深
                            const intensity = item.strength / Math.max(...collaborationData.map(d => d.strength));
                            return `rgba(${Math.round(102 + intensity * 153)}, ${Math.round(126 - intensity * 66)}, ${Math.round(234 - intensity * 104)}, 0.8)`;
                        }),
                        borderColor: collaborationData.map(item => {
                            const intensity = item.strength / Math.max(...collaborationData.map(d => d.strength));
                            return `rgba(${Math.round(102 + intensity * 153)}, ${Math.round(126 - intensity * 66)}, ${Math.round(234 - intensity * 104)}, 1)`;
                        }),
                        borderWidth: 1,
                        borderRadius: 0,
                        barPercentage: 0.8,
                        categoryPercentage: 0.8
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '合作强度'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '合作关系（前100强 → 最后100弱）'
                            },
                            ticks: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const index = context.dataIndex;
                                    const data = collaborationData[index];
                                    return `${data.developer1} - ${data.developer2}: ${data.strength}`;
                                }
                            }
                        }
                    },
                    // 增强交互体验
                    interaction: {
                        mode: 'index',
                        intersect: false
                    }
                }
            });
            
            // 2. 同一/跨技术栈合作对比图数据
            const techStackCollaborationData = {
                labels: ['JavaScript', 'Python', 'Java', 'Go', 'TypeScript', 'Rust', 'C++'],
                datasets: [{
                    label: '同一技术栈合作次数',
                    data: [45, 38, 32, 28, 35, 22, 25],
                    backgroundColor: 'rgba(102, 126, 234, 0.75)',
                    borderColor: '#667eea',
                    borderWidth: 1,
                    borderRadius: 5
                }, {
                    label: '跨技术栈合作次数',
                    data: [38, 35, 28, 32, 30, 25, 22],
                    backgroundColor: 'rgba(118, 75, 162, 0.75)',
                    borderColor: '#764ba2',
                    borderWidth: 1,
                    borderRadius: 5
                }]
            };
            
            // 同一/跨技术栈合作对比图
            const techStackCollaborationCtx = document.getElementById('techStackCollaborationChart').getContext('2d');
            new Chart(techStackCollaborationCtx, {
                type: 'bar',
                data: techStackCollaborationData,
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '合作次数'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '技术栈'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
            
            // 3. 合作对生命周期图数据
            const collaborationLifecycleData = {
                labels: ['短期(1-2个月)', '中期(3-6个月)', '长期(7-12个月)', '超长期(1年以上)'],
                datasets: [{
                    label: '合作对数量',
                    data: [125, 89, 56, 32],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.75)',
                        'rgba(255, 159, 64, 0.75)',
                        'rgba(255, 205, 86, 0.75)',
                        'rgba(75, 192, 192, 0.75)'
                    ],
                    borderColor: [
                        'rgb(255, 99, 132)',
                        'rgb(255, 159, 64)',
                        'rgb(255, 205, 86)',
                        'rgb(75, 192, 192)'
                    ],
                    borderWidth: 1
                }]
            };
            
            // 合作对生命周期图
            const collaborationLifecycleCtx = document.getElementById('collaborationLifecycleChart').getContext('2d');
            new Chart(collaborationLifecycleCtx, {
                type: 'pie',
                data: collaborationLifecycleData,
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.parsed || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((value / total) * 100).toFixed(1);
                                    return `${label}: ${value} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // 网络数据定义
        // 开发者协作网络数据 - 扩展版
        // 计算节点和边的总权重，用于颜色渐变
        function calculateWeights() {
            // 统计每个节点的总权重
            const nodeWeights = {};
            developerEdges.forEach(edge => {
                if (!nodeWeights[edge.from]) nodeWeights[edge.from] = 0;
                if (!nodeWeights[edge.to]) nodeWeights[edge.to] = 0;
                nodeWeights[edge.from] += edge.weight;
                nodeWeights[edge.to] += edge.weight;
            });
            
            // 计算最大权重，用于归一化
            const maxEdgeWeight = Math.max(...developerEdges.map(edge => edge.weight));
            const maxNodeWeight = Math.max(...Object.values(nodeWeights));
            
            return { nodeWeights, maxEdgeWeight, maxNodeWeight };
        }
        
        // 开发者协作网络数据
        const developerEdges = [
            { from: 4, to: 30, weight: 2.5 },
            { from: 10, to: 20, weight: 1.6 },
            { from: 4, to: 11, weight: 3.8 },
            { from: 4, to: 3, weight: 11.6 },
            { from: 4, to: 50, weight: 13.6 },
            { from: 10, to: 28, weight: 2.5 },
            { from: 5, to: 19, weight: 7.4 },
            { from: 30, to: 40, weight: 3.9 },
            { from: 5, to: 42, weight: 1.8 },
            { from: 4, to: 12, weight: 4.0 },
            { from: 30, to: 28, weight: 1.6 },
            { from: 4, to: 21, weight: 4.3 },
            { from: 10, to: 24, weight: 2.6 },
            { from: 10, to: 41, weight: 1.8 },
            { from: 4, to: 29, weight: 2.7 },
            { from: 10, to: 46, weight: 2.2 }
        ];
        
        // 计算权重
        const { nodeWeights, maxEdgeWeight, maxNodeWeight } = calculateWeights();
        
        // 生成节点数据，根据权重设置颜色渐变
        const developerNodes = [
            { id: 4, label: '开发者4', value: 10, weight: nodeWeights[4] || 0 },
            { id: 10, label: '开发者10', value: 8, weight: nodeWeights[10] || 0 },
            { id: 5, label: '开发者5', value: 7, weight: nodeWeights[5] || 0 },
            { id: 30, label: '开发者30', value: 6, weight: nodeWeights[30] || 0 },
            { id: 20, label: '开发者20', value: 5, weight: nodeWeights[20] || 0 },
            { id: 3, label: '开发者3', value: 5, weight: nodeWeights[3] || 0 },
            { id: 50, label: '开发者50', value: 4, weight: nodeWeights[50] || 0 },
            { id: 28, label: '开发者28', value: 4, weight: nodeWeights[28] || 0 },
            { id: 19, label: '开发者19', value: 3, weight: nodeWeights[19] || 0 },
            { id: 40, label: '开发者40', value: 3, weight: nodeWeights[40] || 0 },
            { id: 42, label: '开发者42', value: 3, weight: nodeWeights[42] || 0 },
            { id: 12, label: '开发者12', value: 3, weight: nodeWeights[12] || 0 },
            { id: 21, label: '开发者21', value: 3, weight: nodeWeights[21] || 0 },
            { id: 24, label: '开发者24', value: 2, weight: nodeWeights[24] || 0 },
            { id: 41, label: '开发者41', value: 2, weight: nodeWeights[41] || 0 },
            { id: 29, label: '开发者29', value: 2, weight: nodeWeights[29] || 0 },
            { id: 46, label: '开发者46', value: 2, weight: nodeWeights[46] || 0 },
            { id: 11, label: '开发者11', value: 2, weight: nodeWeights[11] || 0 } // 添加缺失的节点
        ];
        
        // 协作记录数据，用于点击事件显示
        const collaborationRecords = {};
        developerEdges.forEach(edge => {
            if (!collaborationRecords[edge.from]) collaborationRecords[edge.from] = [];
            if (!collaborationRecords[edge.to]) collaborationRecords[edge.to] = [];
            collaborationRecords[edge.from].push({
                partner: edge.to,
                weight: edge.weight
            });
            collaborationRecords[edge.to].push({
                partner: edge.from,
                weight: edge.weight
            });
        });
        
        // 核心开发者影响力网络数据 - 包含所有开发者
        // 核心开发者ID列表
        const coreDeveloperIds = [4, 10, 5];
        
        // 从开发者协作网络中获取所有节点，标记核心开发者
        const coreDeveloperNodes = developerNodes.map(node => {
            // 判断是否为核心开发者
            const isCore = coreDeveloperIds.includes(node.id);
            return {
                id: node.id,
                label: isCore ? `核心开发者${node.id}` : `开发者${node.id}`,
                value: node.value,
                weight: node.weight,
                color: isCore ? '#ff4757' : '#667eea' // 核心开发者使用红色，普通开发者使用蓝色
            };
        });
        
        // 使用开发者协作网络中的所有边，保留权重信息
        const coreDeveloperEdges = developerEdges.map(edge => ({
            from: edge.from,
            to: edge.to,
            weight: edge.weight,
            width: edge.weight / 2 // 根据权重调整边的宽度
        }));
        
        // 技术栈协作网络数据
        const techStackNodes = [
            { id: 1, label: 'JavaScript', value: 25, color: '#f7df1e' },
            { id: 2, label: 'Python', value: 20, color: '#3776ab' },
            { id: 3, label: 'Java', value: 18, color: '#007396' },
            { id: 4, label: 'Go', value: 15, color: '#00add8' },
            { id: 5, label: 'Rust', value: 12, color: '#dea584' },
            { id: 6, label: 'TypeScript', value: 10, color: '#3178c6' },
            { id: 7, label: 'C++', value: 8, color: '#00599c' }
        ];
        
        const techStackEdges = [
            { from: 1, to: 2, width: 8.5 },
            { from: 1, to: 6, width: 12.0 },
            { from: 2, to: 3, width: 7.0 },
            { from: 2, to: 4, width: 9.5 },
            { from: 3, to: 7, width: 6.5 },
            { from: 4, to: 5, width: 8.0 },
            { from: 5, to: 7, width: 5.0 },
            { from: 6, to: 2, width: 5.5 }
        ];
        
        // 网络图表初始化函数
        function initializeNetworkCharts() {
            // 根据权重计算节点颜色（渐变效果）
            function getNodeColor(weight, maxWeight) {
                const intensity = (weight / maxWeight) * 255;
                return `rgba(102, 126, 234, ${intensity / 255})`;
            }
            
            // 根据权重计算边颜色（渐变效果）
            function getEdgeColor(weight, maxWeight) {
                const intensity = (weight / maxWeight) * 255;
                return `rgba(102, 126, 234, ${intensity / 255})`;
            }
            
            // 显示协作记录的函数
            function showCollaborationRecords(nodeId) {
                const records = collaborationRecords[nodeId] || [];
                let message = `开发者${nodeId}的协作记录：\n`;
                if (records.length === 0) {
                    message += '无协作记录';
                } else {
                    records.forEach(record => {
                        message += `- 与开发者${record.partner}的合作强度：${record.weight}\n`;
                    });
                }
                alert(message);
            }
            
            // 开发者协作网络图 - 优化版
            const developerContainer = document.getElementById('developerNetwork');
            
            // 计算最大权重
            const maxEdgeWeight = Math.max(...developerEdges.map(edge => edge.weight));
            const maxNodeWeight = Math.max(...developerNodes.map(node => node.weight));
            
            // 为节点和边添加颜色属性
            const coloredDeveloperNodes = developerNodes.map(node => {
                return {
                    ...node,
                    color: getNodeColor(node.weight, maxNodeWeight)
                };
            });
            
            const coloredDeveloperEdges = developerEdges.map(edge => {
                return {
                    ...edge,
                    width: edge.weight / 2, // 根据权重调整边的宽度
                    color: getEdgeColor(edge.weight, maxEdgeWeight),
                    smooth: { type: 'continuous' }
                };
            });
            
            const developerData = {
                nodes: coloredDeveloperNodes,
                edges: coloredDeveloperEdges
            };
            
            const developerOptions = {
                nodes: {
                    shape: 'circle',
                    font: { size: 12, face: 'Arial' }
                },
                edges: {
                    smooth: { type: 'continuous' }
                },
                physics: {
                    barnesHut: {
                        gravitationalConstant: -8000,
                        springConstant: 0.001,
                        springLength: 200
                    }
                }
            };
            
            const developerNetwork = new vis.Network(developerContainer, developerData, developerOptions);
            
            // 添加点击事件
            developerNetwork.on('click', function(params) {
                if (params.nodes.length > 0) {
                    const nodeId = params.nodes[0];
                    showCollaborationRecords(nodeId);
                }
            });
            
            // 核心开发者影响力图 - 包含所有开发者
            const coreDeveloperContainer = document.getElementById('coreDeveloperNetwork');
            const coreDeveloperData = {
                nodes: coreDeveloperNodes,
                edges: coreDeveloperEdges
            };
            
            const coreDeveloperOptions = {
                nodes: {
                    shape: 'circle',
                    font: { size: 12, face: 'Arial' },
                    scaling: {
                        min: 5,
                        max: 20
                    }
                },
                edges: {
                    color: { inherit: true },
                    smooth: { type: 'continuous' },
                    scaling: {
                        min: 1,
                        max: 5
                    }
                },
                physics: {
                    barnesHut: {
                        gravitationalConstant: -8000,
                        springConstant: 0.001,
                        springLength: 200
                    }
                }
            };
            
            const coreDeveloperNetwork = new vis.Network(coreDeveloperContainer, coreDeveloperData, coreDeveloperOptions);
            
            // 为核心开发者影响力图添加点击事件
            coreDeveloperNetwork.on('click', function(params) {
                if (params.nodes.length > 0) {
                    const nodeId = params.nodes[0];
                    showCollaborationRecords(nodeId);
                }
            });
            
            // 技术栈协作网络 - 优化版
            const techStackContainer = document.getElementById('techStackNetwork');
            const techStackNetwork = new vis.Network(techStackContainer, {
                nodes: techStackNodes,
                edges: techStackEdges.map(edge => ({ ...edge, width: edge.weight / 3 }))
            }, {
                nodes: {
                    shape: 'circle',
                    font: { size: 12, face: 'Arial' }
                },
                edges: {
                    smooth: { type: 'continuous' }
                },
                physics: {
                    barnesHut: {
                        gravitationalConstant: -8000,
                        springConstant: 0.001,
                        springLength: 200
                    }
                }
            });
        }
        
        // 简化的分析模块展开/折叠函数
        function toggleAnalysis(headerElement) {
            const analysisSection = headerElement.parentElement;
            const content = analysisSection.querySelector('.analysis-content');
            const toggle = analysisSection.querySelector('.analysis-toggle');
            
            if (content && toggle) {
                content.classList.toggle('expanded');
                toggle.classList.toggle('expanded');
            }
        }
        
        // 页面加载时初始化图表
        window.addEventListener('load', function() {
            initializeCharts();
            initializeNetworkCharts();
            initializeDeveloperCharts();
            initializeCollaborationCharts();
        });
    </script>
</body>
</html>